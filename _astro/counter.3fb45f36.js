let t=[],v=(c,o)=>{let i,n=[],l={lc:0,l:o||0,value:c,set(s){l.value=s,l.notify()},get(){return l.lc||l.listen(()=>{})(),l.value},notify(s){i=n;let u=!t.length;for(let e=0;e<i.length;e+=2)t.push(i[e],l.value,s,i[e+1]);if(u){for(let e=0;e<t.length;e+=4){let f=!1;for(let a=e+7;a<t.length;a+=4)if(t[a]<t[e+3]){f=!0;break}f?t.push(t[e],t[e+1],t[e+2],t[e+3]):t[e](t[e+1],t[e+2])}t.length=0}},listen(s,u){return n===i&&(n=n.slice()),l.lc=n.push(s,u||l.l)/2,()=>{n===i&&(n=n.slice());let e=n.indexOf(s);~e&&(n.splice(e,2),l.lc--,l.lc||l.off())}},subscribe(s,u){let e=l.listen(s,u);return s(l.value),e},off(){}};return l};const g={value:0},r=v(g),h=()=>r.set({value:r.get().value+1}),p=()=>r.set({value:r.get().value-1});export{r as c,p as d,h as i};
